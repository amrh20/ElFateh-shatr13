<header class="header-wrapper bg-white sticky-top border-bottom shadow-sm">
  <div class="container">
    <div class="d-flex align-items-center justify-content-between py-3">
      <!-- Logo -->
      <div class="d-flex align-items-center">
        <a routerLink="/home" class="d-flex align-items-center text-decoration-none header-logo">
          <img src="assets/images/logo.png" alt="الفتح للأدوات المنزلية" class="logo-img">
        </a>
      </div>

      <!-- Desktop Navigation -->
      <nav class="d-none d-lg-flex gap-4 nav-bar-wrapper">
        <a routerLink="/home" routerLinkActive="active" 
           class="nav-link-custom text-decoration-none fw-medium">
          الرئيسية
        </a>
        <a routerLink="/all-products" routerLinkActive="active" 
           class="nav-link-custom text-decoration-none fw-medium">
           المنتجات
        </a>
        <a routerLink="/categories" routerLinkActive="active" 
           class="nav-link-custom text-decoration-none fw-medium">
          الأصناف
        </a>
        <a routerLink="/about" routerLinkActive="active" 
           class="nav-link-custom text-decoration-none fw-medium">
          من نحن
        </a>
      </nav>

      <!-- Actions -->
      <div class="header-actions d-flex align-items-center gap-2 gap-md-3">
        <!-- Wishlist -->
        <a routerLink="/wishlist" class="header-action-btn text-decoration-none">
          <span class="icon-wrapper">
            <i class="fas fa-heart"></i>
          </span>
          <span *ngIf="wishlistCount > 0" class="action-badge">
            {{ wishlistCount > 99 ? '99+' : wishlistCount }}
          </span>
        </a>

        <!-- Cart -->
        <a routerLink="/cart" class="header-action-btn text-decoration-none">
          <span class="icon-wrapper">
            <i class="fas fa-shopping-cart"></i>
          </span>
          <span *ngIf="cartCount > 0" class="action-badge">
            {{ cartCount > 99 ? '99+' : cartCount }}
          </span>
        </a>

        <!-- Profile/Login -->
        <div class="position-relative">
          <button 
            (click)="toggleUserMenu()"
            type="button"
            [ngClass]="{'header-action-btn': true, 'header-action-btn--success': isLoggedIn}">
            <span class="icon-wrapper">
              <i *ngIf="!isLoggedIn" class="fas fa-sign-in-alt"></i>
              <span *ngIf="isLoggedIn" class="position-relative">
                <i class="fas fa-user"></i>
                <span class="online-indicator"></span>
              </span>
            </span>
          </button>

          <!-- User Dropdown Menu -->
          <div *ngIf="isUserMenuOpen" 
               class="position-absolute dropdown-menu-custom dropdown-menu-start show animate-fade-in-down">
            <div class="user-menu-card">
              <!-- If user is not logged in -->
              <ng-container *ngIf="!isLoggedIn">
                <div class="user-menu-header">
                  <span class="menu-icon"><i class="fas fa-user-circle"></i></span>
                  <div>
                    <h6 class="menu-title">أهلاً بك!</h6>
                    <p class="menu-subtitle">سجّل دخولك للوصول إلى حسابك</p>
                  </div>
                </div>
                <div class="menu-actions">
                  <a routerLink="/login" 
                     (click)="closeUserMenu()"
                     class="menu-btn primary">تسجيل الدخول</a>
                  <a routerLink="/register" 
                     (click)="closeUserMenu()"
                     class="menu-btn secondary">إنشاء حساب جديد</a>
                </div>
              </ng-container>

              <!-- If user is logged in -->
              <ng-container *ngIf="isLoggedIn">
                <div class="user-menu-header logged">
                  <span class="menu-icon"><i class="fas fa-smile-beam"></i></span>
                  <div>
                    <h6 class="menu-title">مرحباً، {{ userName }}</h6>
                    <p class="menu-subtitle">سعيدون بعودتك</p>
                  </div>
                </div>
                <div class="menu-links">
                  <a routerLink="/profile" (click)="closeUserMenu()">
                    <i class="fas fa-user"></i>
                    <span>الملف الشخصي</span>
                  </a>
                  <a routerLink="/track-order" (click)="closeUserMenu()">
                    <i class="fas fa-file-alt"></i>
                    <span>تتبع الطلبات</span>
                  </a>
                </div>
                <button (click)="logout()" class="menu-btn logout">تسجيل الخروج</button>
              </ng-container>
            </div>
          </div>
        </div>

        <!-- Mobile Menu Button -->
        <button 
          (click)="toggleMobileMenu()"
          class="d-lg-none nav-mobile header-action-btn"
          type="button"
          aria-label="Toggle mobile menu">
          <span class="icon-wrapper">
            <i *ngIf="!isMobileMenuOpen" class="fas fa-bars"></i>
            <i *ngIf="isMobileMenuOpen" class="fas fa-times"></i>
          </span>
        </button>
      </div>
    </div>

    <!-- Mobile Navigation Menu -->
    <div *ngIf="isMobileMenuOpen" 
         class="d-lg-none border-top mobile-menu animate-fade-in-down">
      <nav class="py-3 d-flex flex-column gap-2">
        <a routerLink="/home" 
           (click)="closeMobileMenu()"
           routerLinkActive="active" 
           class="mobile-nav-link text-decoration-none px-3 py-2 rounded">
          الرئيسية
        </a>
        <a routerLink="/all-products" 
           (click)="closeMobileMenu()"
           routerLinkActive="active" 
           class="mobile-nav-link text-decoration-none px-3 py-2 rounded">
           المنتجات
        </a>
        <a routerLink="/categories" 
           (click)="closeMobileMenu()"
           routerLinkActive="active" 
           class="mobile-nav-link text-decoration-none px-3 py-2 rounded">
          الأصناف
        </a>
        <a routerLink="/about" 
           (click)="closeMobileMenu()"
           routerLinkActive="active" 
           class="mobile-nav-link text-decoration-none px-3 py-2 rounded">
          من نحن
        </a>
      </nav>
    </div>
  </div>
</header>
