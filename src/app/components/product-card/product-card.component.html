<div class="product-card-compact">
  <!-- Card Container -->
  <div class="card-wrapper">

    <!-- Image Section (Always Visible) -->
    <div class="image-section">
      <a [routerLink]="['/product', product?._id]" class="image-link">
        <img [src]="getProductImage()"
             [alt]="product?.name || 'منتج'"
             class="product-image">
      </a>

      <!-- Discount Badge - Always Visible -->
      <div *ngIf="hasDiscount()" class="discount-badge-mini">
        -{{ calculateDiscountPercentage() }}%
      </div>

      <!-- Wishlist Button - Always Visible -->
      <button (click)="toggleWishlist()"
              [@wishlistAnimation]="wishlistAnimationState"
              class="wishlist-btn-mini"
              [class.active]="isInWishlist">
        <svg class="heart-icon" [class.filled]="isInWishlist" fill="currentColor" viewBox="0 0 24 24">
          <path d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
        </svg>
      </button>

      <!-- Removed inline action icons -->
    </div>

    <!-- Info Section (Always Visible - Compact) -->
    <div class="info-section">
      <!-- Product Title -->
      <h3 class="product-title-compact" [@textAnimation]="textAnimationState">
        <a [routerLink]="['/product', product?._id]">
          {{ product?.name || 'منتج' }}
        </a>
      </h3>

      <!-- Price -->
      <div class="price-compact">
        <div class="current-price">
          <span class="value">{{ getCurrentPrice() }}</span>
          <span class="currency">ج.م</span>
        </div>
        <div *ngIf="hasDiscount()" class="original-price">
          <span>{{ product?.price || 0 }}</span>
          <span class="currency">ج.م</span>
        </div>
      </div>

      <!-- Brand (if available) -->
      <div *ngIf="product?.brand" class="brand-compact">
        {{ product?.brand }}
      </div>

      <!-- Description (Hover on Desktop, Always on Mobile) -->
      <p class="info-description">
        {{ product?.description || 'لا يوجد وصف متاح' }}
      </p>

      <!-- Add to Cart Button (Hover on Desktop, Always on Mobile) -->
      <button (click)="addToCart()"
              [@cartAnimation]="cartAnimationState"
              [disabled]="!product?.stock"
              class="btn-add-cart-info"
              [class.disabled]="!product?.stock">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
        </svg>
        <span>{{ product?.stock ? 'أضف للسلة' : 'غير متوفر' }}</span>
      </button>
    </div>

  </div>
</div>
